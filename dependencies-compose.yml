version: "3.4"
services:
  rabbitmq:
    container_name: rabbitmq-pubsub-adapter-dev
    image: rabbitmq:3.8.2-management
    ports:
      - "6369:4369"
      - "46672:25672"
      - "7671-7672:5671-5672"
      - "17671-17672:15671-15672"
      - "17692:15692"
    volumes:
      - ./rabbitmq/rabbitmq.config:/etc/rabbitmq/rabbitmq.config:ro
      - ./rabbitmq/definitions.json:/opt/definitions.json:ro

  pubsub-emulator:
    container_name: pubsub-emulator-pubsub-adapter-dev
    image: bigtruedata/gcloud-pubsub-emulator
    ports:
      - "8539:8539"
    command: start --host-port 0.0.0.0:8539
